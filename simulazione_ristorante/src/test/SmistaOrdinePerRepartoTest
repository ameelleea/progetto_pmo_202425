package test;

import static org.junit.jupiter.api.Assertions.assertTrue;
import static org.mockito.Mockito.mock;

import java.time.Duration;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.junit.jupiter.api.Test;

import main.palazzetti.classes.OrdineImpl;
import main.palazzetti.classes.ProdottoImpl;
import main.palazzetti.interfaces.Prodotto;
import main.palazzetti.interfaces.Tavolo;
import main.balducci.classes.TipoProdotto;
import main.balducci.classes.TipoReparto;

public class SmistaOrdinePerRepartoTest {

    @Test
    void testSmistamentoOrdinePerReparto() {
        Tavolo tavoloMock = mock(Tavolo.class);

        // Creo la mappa dei prodotti con quantit√†
        Map<Prodotto, Integer> prodotti = new HashMap<>();

        Prodotto bevanda = new ProdottoImpl("Acqua", Duration.ofMinutes(1), 1.5, TipoProdotto.BEVANDA, TipoReparto.BAR);
        Prodotto pizza = new ProdottoImpl("Margherita", Duration.ofMinutes(7), 6.0, TipoProdotto.PIATTO, TipoReparto.PIZZERIA);

        prodotti.put(bevanda, 1);
        prodotti.put(pizza, 1);

        OrdineImpl ordine = new OrdineImpl(tavoloMock, prodotti);

        Map<TipoReparto, List<Prodotto>> smistati = ordine.smistaPerReparto();

        assertTrue(smistati.get(TipoReparto.BAR).contains(bevanda));
        assertTrue(smistati.get(TipoReparto.PIZZERIA).contains(pizza));
    }
}
